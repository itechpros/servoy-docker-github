name: Developer Builds
on:
  push:
    branches:
     - main
  workflow_call:
jobs:
  build-servoy-6:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        version: [{build: 1439, name: 6.1.6}, {build: 1433, name: 6.1.5}, {build: 1429, name: 6.1.4}, {build: 1424, name: 6.1.3}, {build: 1421, name: 6.1.2}, {build: 1420, name: 6.1.1}, {build: 1418, name: 6.1.0}]
    steps:
     - name: Checkout
       uses: actions/checkout@v2
     - name: Docker Login
       uses: docker/login-action@v2
       with:
         registry: ghcr.io
         username: ${{ github.actor }}
         password: ${{ secrets.GITHUB_TOKEN }}
     - name: Create OpenJDK 8 base image
       run: |
         docker build -t itechpros/openjdk:8 openjdk-8-base
     - name: Build Servoy ${{matrix.version.name}} (${{{matrix.version.build}}) images
       run: |
         docker build -t ghcr.io/itechpros/servoy_installer:${{matrix.version.name}}.${{matrix.version.build}}-jdk8 --build-arg SERVOY_VERSION_MAJOR=6 --build-arg SERVOY_VERSION_BUILD=${{matrix.version.build}} developer-base-jar
  build-servoy-7:
    runs-on: ubuntu-latest
    steps:
     - name: Checkout
       uses: actions/checkout@v2
     - name: Docker Login
       uses: docker/login-action@v2
       with:
         registry: ghcr.io
         username: ${{ github.actor }}
         password: ${{ secrets.GITHUB_TOKEN }}
     - name: Create OpenJDK 8 base image
       run: |
         docker build -t itechpros/openjdk:8 openjdk-8-base
     - name: Build Servoy 7.4.5 (2040) images
       run: |
         docker build -t ghcr.io/itechpros/servoy_installer:7.4.5.2040-jdk8 --build-arg SERVOY_VERSION_MAJOR=7 --build-arg SERVOY_VERSION_BUILD=2040 developer-base-jar 
     - name: Build Servoy 7.4.4 (2038) images
       run: |
         docker build -t ghcr.io/itechpros/servoy_installer:7.4.4.2038-jdk8 --build-arg SERVOY_VERSION_MAJOR=7 --build-arg SERVOY_VERSION_BUILD=2038 developer-base-jar
     - name: Build Servoy 7.4.3 (2035) images
       run: |
         docker build -t ghcr.io/itechpros/servoy_installer:7.4.3.2035-jdk8 --build-arg SERVOY_VERSION_MAJOR=7 --build-arg SERVOY_VERSION_BUILD=2035 developer-base-jar
     - name: Build Servoy 7.4.2 (2032) images
       run: |
         docker build -t ghcr.io/itechpros/servoy_installer:7.4.2.2032-jdk8 --build-arg SERVOY_VERSION_MAJOR=7 --build-arg SERVOY_VERSION_BUILD=2032 developer-base-jar
     - name: Build Servoy 7.4.1 (2027) images
       run: |
         docker build -t ghcr.io/itechpros/servoy_installer:7.4.1.2027-jdk8 --build-arg SERVOY_VERSION_MAJOR=7 --build-arg SERVOY_VERSION_BUILD=2027 developer-base-jar
     - name: Build Servoy 7.4.0 (2025) images
       run: |
         docker build -t ghcr.io/itechpros/servoy_installer:7.4.0.2025-jdk8 --build-arg SERVOY_VERSION_MAJOR=7 --build-arg SERVOY_VERSION_BUILD=2025 developer-base-jar
     - name: Build Servoy 7.3.1 (2021) images
       run: |
         docker build -t ghcr.io/itechpros/servoy_installer:7.3.1.2021-jdk8 --build-arg SERVOY_VERSION_MAJOR=7 --build-arg SERVOY_VERSION_BUILD=2025 developer-base-jar
     - name: Build Servoy 7.3.0 (2017) images
       run: |
         docker build -t ghcr.io/itechpros/servoy_installer:7.3.1.2017-jdk8 --build-arg SERVOY_VERSION_MAJOR=7 --build-arg SERVOY_VERSION_BUILD=2017 developer-base-jar
     - name: Build Servoy 7.2.0 (2012) images
       run: |
         docker build -t ghcr.io/itechpros/servoy_installer:7.2.0.2012-jdk8 --build-arg SERVOY_VERSION_MAJOR=7 --build-arg SERVOY_VERSION_BUILD=2012 developer-base-jar
     - name: Build Servoy 7.0.0 (2007) images
       run: |
         docker build -t ghcr.io/itechpros/servoy_installer:7.0.0.2007-jdk8 --build-arg SERVOY_VERSION_MAJOR=7 --build-arg SERVOY_VERSION_BUILD=2007 developer-base-jar
  # build-servoy-8:
  #   runs-on: ubuntu-latest
  #   needs: authenticate
  #   steps:
  #    - name: Test
  #      run: |
  #        echo Hello world!
  # build-servoy-2020:
  #   runs-on: ubuntu-latest
  #   needs: authenticate
  #   steps:
  #    - name: Test
  #      run: |
  #        echo Hello world!
  # build-servoy-2021:
  #   runs-on: ubuntu-latest
  #   needs: authenticate
  #   steps:
  #    - name: Test
  #      run: |
  #        echo Hello world!
  # build-servoy-2022:
  #   runs-on: ubuntu-latest
  #   needs: authenticate
  #   steps:
  #    - name: Test
  #      run: |
  #        echo Hello world!
